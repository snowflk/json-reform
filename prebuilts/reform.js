!function(e,t){"object"np==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Reformer=t():e.Reformer=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";const{isFunction:r}=n(2);function o(e,t={}){this.rules=e,this.settings={keepUnlisted:!1,async:!1,sequential:!1},this.settings={...this.settings,...t}}o.prototype.compile=function(){let e=this;return function(t){let n={},r=[];for(let o in t)if(e.rules.hasOwnProperty(o)){let n,i=e.rules[o];Array.isArray(i)?(n=e.handleMultiple(i,o,t),r=r.concat(n)):(n=e.handleSingle(i,o,t),r.push(n))}else e.settings.keepUnlisted&&(n[o]=t[o]);return e.settings.async?Promise.all(r).then(t=>n=e.combineAllProps(t,n)):e.combineAllProps(r,n)}},o.prototype.combineAllProps=function(e,t){return t=Array.isArray(e)?e.reduce((e,t)=>({...t,...e}),t):{...t,...e},Object.keys(t).forEach(e=>void 0===t[e]&&delete t[e]),t},o.prototype.promiseSwitch=function(e,t){let n={};return this.settings.async?t&&r(t.then)?t.then(t=>(n[e]=t,n)):(n[e]=t,Promise.resolve(n)):(n[e]=t,n)},o.prototype.handleSingle=function(e,t,n){let o,i;return e.hasOwnProperty("name")&&e.hasOwnProperty("handler")&&r(e.handler)&&"string"==typeof e.name?(o=e.name,i=e.handler(n[t],n)):"string"==typeof e?(i=n[t],o=e):r(e)?(o=t,i=e(n[t],n)):!0===e?(o=t,i=n[t]):!1===e&&(o=t,i=void 0),this.promiseSwitch(o,i)},o.prototype.handleMultiple=function(e,t,n){let r=this,o=[];return Array.isArray(e)&&e.forEach(function(e){let i=r.handleSingle(e,t,n);o.push(i)}),o},o.prototype.transform=function(e){const t=this.compile(this.rules);if(Array.isArray(e)){if(this.settings.sequential&&this.settings.async){let n=Promise.resolve([]);return e.forEach(e=>{n=n.then(n=>t(e).then(e=>[...n,e]))}),n}let n=[];return e.forEach(e=>{n.push(t(e))}),this.settings.async?Promise.all(n):n}return t(e)},e.exports=o},function(e,t,n){"use strict";e.exports={isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)}}}])});